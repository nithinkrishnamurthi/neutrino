# Neutrino Orchestrator Configuration
orchestrator:
  # Number of Python worker processes to spawn
  worker_count: 4

  # Python module containing your Neutrino app
  # e.g., "examples.test_routes" or "myapp.main"
  app_module: "examples.fastapi_integration"

  # HTTP server settings
  http:
    host: "0.0.0.0"
    port: 8080
    # Path to OpenAPI spec for dynamic route registration
    # If not specified, only /health and /status routes are available
    openapi_spec: "openapi.json"

  # Worker lifecycle settings
  worker:
    # Maximum tasks before worker recycling
    max_tasks_per_worker: 1000

    # Maximum memory (MB) before worker recycling
    max_memory_mb: 4096

    # Worker startup timeout (seconds)
    startup_timeout_secs: 10

  # Task settings
  tasks:
    # Default timeout for synchronous tasks (seconds)
    default_timeout_secs: 30

  # Optional ASGI app integration (e.g., FastAPI, Django)
  asgi:
    enabled: true
    mode: "mounted"  # "mounted" (same process) or "proxy" (separate service)

    # Mounted mode options (runs Uvicorn locally):
    port: 8081  # Internal port for Uvicorn
    workers: 4  # Number of Uvicorn workers
    app_command: "uvicorn_app:app"  # Uvicorn app command (default: "uvicorn_app:app")

    # Proxy mode options (forwards to external service):
    # service_url: "http://fastapi-service:8080"
    # timeout_secs: 30
